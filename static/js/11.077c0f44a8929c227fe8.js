webpackJsonp([11],{362:function(t,n,i){function e(t){i(531)}var o=i(229)(i(441),i(587),e,null,null);t.exports=o.exports},369:function(t,n,i){"use strict";n.a={requireService:function(t){if(!t)throw console.trace(),String("模块引入错误, 请输入service模块名");return console.log(abp.services),console.log(t),abp.services.KuMaDao[t]}}},388:function(t,n,i){"use strict";var e=i(369),o=e.a.requireService("notification");n.a=o},419:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(38),o=i.n(e),a=i(37),s=i.n(a),c=i(388);n.default={props:{visible:Boolean},data:function(){return{loading:!1,receiveNotifications:void 0,notifications:[],dialogVisible:!1}},watch:{visible:function(t){t!=this.dialogVisible&&(this.dialogVisible=t)},dialogVisible:function(t){this.$emit("update:visible",t)}},activated:function(){var t=this;return s()(o.a.mark(function n(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},n,t)}))()},mounted:function(){var t=this;return s()(o.a.mark(function n(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},n,t)}))()},methods:{handleOpen:function(){var t=this;return s()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,c.a.getNotificationSettings();case 3:i=n.sent,t.receiveNotifications=i.receiveNotifications,t.notifications=i.notifications,t.loading=!1,console.log(i);case 8:case"end":return n.stop()}},n,t)}))()},save:function(){var t=this;return s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,c.a.updateNotificationSettings({receiveNotifications:t.receiveNotifications,notifications:t.notifications});case 3:abp.notify.success(lang.L("SavedSuccessfully"),lang.L("Success")),t.loading=!1,t.dialogVisible=!1;case 6:case"end":return n.stop()}},n,t)}))()}},components:{}}},441:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(38),o=i.n(e),a=i(37),s=i.n(a),c=i(388),r=i(537),l=i.n(r);n.default={data:function(){return{loadingData:!1,data:[],total:0,fetchParam:{state:"",maxResultCount:15,skipCount:0,page:1},dialogSetting:{isShow:!1}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return s()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadingData=!0,n.next=3,c.a.getUserNotifications(t.fetchParam);case 3:i=n.sent,t.data=i.items,t.total=i.totalCount,t.loadingData=!1,abp.view.setContentLoading(!1);case 8:case"end":return n.stop()}},n,t)}))()},handleCurrentChange:function(t){this.fetchParam.skipCount=Math.abs(t-1)*this.fetchParam.maxResultCount,this.fetchData()},handleSizeChange:function(t){this.fetchParam.maxResultCount=t,this.fetchData()},setReaded:function(t){var n=this;return s()(o.a.mark(function i(){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n.loadingData=!0,i.next=3,c.a.setNotificationAsRead({id:t.id});case 3:n.$store.dispatch("setNotificationReaded",{data:t}),t.state=1,n.loadingData=!1;case 6:case"end":return i.stop()}},i,n)}))()},setAllReaded:function(){var t=this;return s()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadingData=!0,n.next=3,c.a.setAllNotificationsAsRead();case 3:t.$store.state.index.notifications.forEach(function(n){t.$store.dispatch("setNotificationReaded",{data:n})}),t.data.map(function(t){t.state=1}),t.loadingData=!1;case 6:case"end":return n.stop()}},n,t)}))()}},components:{NotifiSetting:l.a}}},492:function(t,n,i){n=t.exports=i(348)(!0),n.push([t.i,'.common__notification-container .search>section{margin-left:10px;margin-bottom:14px;display:inline-block;margin-right:10px}.common__notification-container .search>section>span,.common__notification-container .search>section i{margin-right:2px}.common__notification-container .search>section>*{vertical-align:middle;display:inline-block;max-height:36px}.common__notification-container .search .el-input{width:auto}.common__notification-container{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff;margin-right:0;box-shadow:0 2px 10px rgba(0,0,0,.2);margin-bottom:15px}.common__notification-container:after{content:"";clear:both;display:block}.common__notification-container .pagin{float:right;margin-top:15px}.common__notification-container .bottom-manage{margin-top:15px}.common__notification-container .el-table__header-wrapper{overflow:hidden!important}.right-top-btnContainer{position:absolute;right:0;top:-50px}.right-top-btnContainer.header-button>.el-button i{margin-right:5px}.right-top-btnContainer.header-button>.el-button i:before{position:relative;top:-1px}em,i{font-style:normal}',"",{version:3,sources:["C:/Code/Y.AbpProjectTemplate2/YoYo/KuMaDao.AbpProjectTemplate.Web/Assets/src/views/common/NotificationList.vue"],names:[],mappings:"AACA,gDACE,iBAAkB,AAClB,mBAAoB,AACpB,qBAAsB,AACtB,iBAAmB,CACpB,AACD,uGACI,gBAAkB,CACrB,AACD,kDACI,sBAAuB,AACvB,qBAAsB,AACtB,eAAiB,CACpB,AACD,kDACE,UAAY,CACb,AACD,gCACE,aAAc,AACd,kBAAmB,AACnB,yBAA0B,AAC1B,kBAAmB,AACnB,gBAAiB,AACjB,eAAgB,AAChB,qCAA0C,AAC1C,kBAAoB,CACrB,AACD,sCACI,WAAY,AACZ,WAAY,AACZ,aAAe,CAClB,AACD,uCACI,YAAa,AACb,eAAiB,CACpB,AACD,+CACI,eAAiB,CACpB,AACD,0DACI,yBAA4B,CAC/B,AACD,wBACE,kBAAmB,AACnB,QAAS,AACT,SAAW,CACZ,AACD,mDACI,gBAAkB,CACrB,AACD,0DACM,kBAAmB,AACnB,QAAU,CACf,AACD,KACE,iBAAmB,CACpB",file:"NotificationList.vue",sourcesContent:["\n.common__notification-container .search > section {\n  margin-left: 10px;\n  margin-bottom: 14px;\n  display: inline-block;\n  margin-right: 10px;\n}\n.common__notification-container .search > section > span, .common__notification-container .search > section i {\n    margin-right: 2px;\n}\n.common__notification-container .search > section > * {\n    vertical-align: middle;\n    display: inline-block;\n    max-height: 36px;\n}\n.common__notification-container .search .el-input {\n  width: auto;\n}\n.common__notification-container {\n  padding: 15px;\n  position: relative;\n  border: 1px solid #ededed;\n  border-radius: 5px;\n  background: #fff;\n  margin-right: 0;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);\n  margin-bottom: 15px;\n}\n.common__notification-container:after {\n    content: '';\n    clear: both;\n    display: block;\n}\n.common__notification-container .pagin {\n    float: right;\n    margin-top: 15px;\n}\n.common__notification-container .bottom-manage {\n    margin-top: 15px;\n}\n.common__notification-container .el-table__header-wrapper {\n    overflow: hidden !important;\n}\n.right-top-btnContainer {\n  position: absolute;\n  right: 0;\n  top: -50px;\n}\n.right-top-btnContainer.header-button > .el-button i {\n    margin-right: 5px;\n}\n.right-top-btnContainer.header-button > .el-button i:before {\n      position: relative;\n      top: -1px;\n}\ni, em {\n  font-style: normal;\n}\n"],sourceRoot:""}])},496:function(t,n,i){n=t.exports=i(348)(!0),n.push([t.i,".dialog__notifi-setting .el-dialog{padding-bottom:15px}.dialog__notifi-setting .dialog__notifi-setting--content h4{font-size:18px}.dialog__notifi-setting .dialog__notifi-setting--content h4,.dialog__notifi-setting .dialog__notifi-setting--content h5{font-weight:400}","",{version:3,sources:["C:/Code/Y.AbpProjectTemplate2/YoYo/KuMaDao.AbpProjectTemplate.Web/Assets/src/components/dialog/NotifiSetting.vue"],names:[],mappings:"AACA,mCACE,mBAAqB,CACtB,AACD,4DACE,cAAgB,CACjB,AACD,wHACE,eAAoB,CACrB",file:"NotifiSetting.vue",sourcesContent:["\n.dialog__notifi-setting .el-dialog {\n  padding-bottom: 15px;\n}\n.dialog__notifi-setting .dialog__notifi-setting--content h4 {\n  font-size: 18px;\n}\n.dialog__notifi-setting .dialog__notifi-setting--content h4, .dialog__notifi-setting .dialog__notifi-setting--content h5 {\n  font-weight: normal;\n}\n"],sourceRoot:""}])},531:function(t,n,i){var e=i(492);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(349)("6bf28572",e,!0)},535:function(t,n,i){var e=i(496);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(349)("4f1b8691",e,!0)},537:function(t,n,i){function e(t){i(535)}var o=i(229)(i(419),i(591),e,null,null);t.exports=o.exports},587:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("article",{staticClass:"common__notification-container"},[i("section",{staticClass:"right-top-btnContainer"},[i("el-button",{staticClass:"waves-effect",attrs:{icon:"setting"},on:{click:function(n){t.dialogSetting.isShow=!0}}},[t._v("\n            "+t._s(t.L("NotificationSettings"))+"\n        ")]),t._v(" "),i("el-button",{staticClass:"waves-effect",attrs:{type:"primary",icon:"check"},on:{click:t.setAllReaded}},[t._v(t._s(t.L("SetAllAsRead"))+"\n        ")])],1),t._v(" "),i("article",{staticClass:"search"},[i("section",[i("i",[t._v(t._s(t.L("Search")))]),t._v(" "),i("el-select",{on:{change:t.fetchData},model:{value:t.fetchParam.state,callback:function(n){t.fetchParam.state=n},expression:"fetchParam.state"}},[i("el-option",{attrs:{label:t.L("All"),value:""}}),t._v(" "),i("el-option",{attrs:{label:t.L("Unread"),value:0}})],1)],1),t._v(" "),i("section",[i("el-button",{staticClass:"waves-effect",on:{click:t.fetchData}},[t._v(t._s(t.L("Refresh")))])],1)]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],staticClass:"data-table",attrs:{data:t.data,fit:!0,border:""}},[i("el-table-column",{attrs:{"min-width":"120",prop:"notification.data.message",label:t.L("Notifications")}}),t._v(" "),i("el-table-column",{attrs:{width:"220",label:t.L("CreationTime")},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v("\n                "+t._s(t._f("date2calendar")(n.row.notification.creationTime))+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",width:"200",label:t.L("Actions")},scopedSlots:t._u([{key:"default",fn:function(n){return[0==n.row.state?i("el-button",{staticClass:"waves-effect",attrs:{type:"primary",size:"mini"},on:{click:function(i){t.setReaded(n.row)}}},[t._v("\n                    "+t._s(t.L("SetAsRead"))+"\n                ")]):i("el-tag",{attrs:{type:"gray"}},[t._v(t._s(t.L("Readed")))])]}}])})],1),t._v(" "),i("el-pagination",{staticClass:"pagin",attrs:{"current-page":t.fetchParam.page,"page-size":t.fetchParam.maxResultCount,"page-sizes":[15,30,60,100],layout:"sizes,total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),i("NotifiSetting",{attrs:{visible:t.dialogSetting.isShow},on:{"update:visible":function(n){t.dialogSetting.isShow=n}}})],1)},staticRenderFns:[]}},591:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("el-dialog",{staticClass:"dialog__notifi-setting",attrs:{title:t.L("NotificationSettings"),visible:t.dialogVisible,size:"tiny"},on:{"update:visible":function(n){t.dialogVisible=n},open:t.handleOpen}},[i("article",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dialog__notifi-setting--content"},[i("section",[i("h4",[t._v("\n                ["+t._s(t.L("ReceiveNotifications"))+"]\n            ")]),t._v(" "),i("em",[i("el-switch",{attrs:{"on-text":t.L("On"),"off-text":t.L("Off")},model:{value:t.receiveNotifications,callback:function(n){t.receiveNotifications=n},expression:"receiveNotifications"}})],1)]),t._v(" "),i("section",{staticStyle:{"margin-top":"25px"}},[i("h4",[t._v("\n                ["+t._s(t.L("NotificationtType"))+"]\n            ")])]),t._v(" "),t._l(t.notifications,function(n){return i("section",[i("h5",[i("el-checkbox",{model:{value:n.isSubscribed,callback:function(t){n.isSubscribed=t},expression:"item.isSubscribed"}},[t._v(t._s(n.displayName))])],1)])})],2),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"waves-effect",on:{click:function(n){t.dialogVisible=!1}}},[t._v(t._s(t.L("Cancel")))]),t._v(" "),i("el-button",{staticClass:"waves-effect",attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.L("Save")))])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=11.077c0f44a8929c227fe8.js.map